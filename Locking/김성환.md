- DB Locking에 대해 설명해 주세요.
  - 잠금은 동시성을 제어하기 위한 기능입니다. 트랜잭션은 데이터의 정합성을 보장하기 위한 기능이라 비슷하지만 다른 부분이 있습니다. 여러 커넥션이 하나의 정보에 동시적으로 접근하는 것을 막을 수 있습니다
  - 락의 종류에는 Shared Lock(Read Lock) 과 Exclusive Lock (Write Lock) 이 있습니다.
  - Shared Lock(Read Lock) : 데이터를 읽기할 때 사용, 여러 트랜잭션이 동시에 공유 가능 (읽기 가능)
  - Exclusive Lock (Write Lock) : 데이터를 수정할 때 사용, 해당 트랜잭션만 접근 가능 (읽기/쓰기 모두 불가), 병목 발생 위험
- Optimistic Lock/Pessimistic Lock에 대해 설명해 주세요.
  - Optimistic Lock
  - 트랜잭션간의 충돌이 거의 발생하지 않는다고 가정하고 사용하는 Lock 전략
  - 데이터 수정 시 버전 번호나 타임스탬프를 사용하여 데이터의 변경 여부를 확인한다. 수정 과정에서 버전 번호나 타임스탬프가 변경되었다면 충돌이 발생했다고 판단하고 해당 트랜잭션을 롤백한다.충돌이 자주 발생하는 환경에서는 트랜잭션 롤백이 자주 일어나 비효율적이다. 애플리케이션 Lock이라고도 한다.
  - Pessimistic Lock
  - 트랜잭션간의 충돌이 빈번히 발생한다고 가정하고 사용하는 Lock 전략 트랜잭션이 시작될 때 shared lock이나 exclusive lock을 걸고 시작한다. 데이터에 대한 접근을 엄격하게 제어하기에 시스템 성능에는 부정적이다.
- 물리적인 Lock을 건다면, 만약 이를 수행중인 요청에 문제가 생겨 비정상 종료되면 Lock이 절대 해제되지 않는 문제가 생길 수도 있을 것 같습니다. DB는 이를 위한 해결책이 있나요? 없다면, 우리가 이 문제를 해결할 수 없을까요?
  - mysql의 경우 innodb 스토리이 엔진에 자동 데드락 감지 시스템이 있습니다. 주기적으로 데드락이 있는지 검사하면 교착 상태에 빠진 트랜잭션중 하나를 찾아서 종료합니다. ㅇ이때 기준은 트랜잭션 언두로그 양입니다(언두 로그를 적개 가졌다는 내용은 롤백을 해도 언두를 처리해야할 내용이 없다는 것)
  - Lock wait timeout 을 설정하여 lock의 제한시간을 걸어둡니다

### 출처

realmysql 8.0 1권 4.2.5 장
태희쌤 블로그 : https://goodteacher.tistory.com/819
